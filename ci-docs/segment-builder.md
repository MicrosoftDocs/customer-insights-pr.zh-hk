---
title: 使用客戶細分建立器頁面建立複雜客戶細分
description: 使用客戶細分建立器根據各種屬性對客戶進行分組來建立複雜的客戶細分。
ms.date: 03/25/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: cde373cd65e296675e1b3c92f3024e1093853842
ms.sourcegitcommit: 8a28e9458b857adf8e90e25e43b9bc422ebbb2cd
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 07/18/2022
ms.locfileid: "9170662"
---
# <a name="create-complex-segments-with-segment-builder"></a>使用客戶細分建立器頁面建立複雜客戶細分

對整合客戶實體周圍及相關實體，定義複雜篩選。 每個區段會在處理後建立一組可匯出和採取相應動作的客戶記錄。

> [!TIP]
> 以 **個別客戶** 為主的區段自動包括區段成員可用的連絡人資訊。 在 **商務帳戶** 環境中，區段以帳戶 (公司或子公司) 為主。 若要將連絡人資訊納入區段，請使用區段 Builder 的 **專案屬性** 功能。 請確保連絡人資料來源的[語義可對應 ContactProfile](semantic-mappings.md#define-a-contactprofile-semantic-entity-mapping) 實體。

## <a name="segment-builder"></a>客戶細分建立器

下圖顯示了客戶細分建立器的各個外觀。 這會顯示一個客戶細分，可以產生一個客戶團體。 客戶在特定時間範圍訂購貨物並收集獎勵積分或花費特定金額。

:::image type="content" source="media/segment-builder-overview.png" alt-text="客戶細分建立器的元素。" lightbox="media/segment-builder-overview.png":::

1. 利用規則和子規則整理您的區段。 每個規則或子規則都由條件組成。 將條件與邏輯運算子相結合。

1. 在適用規則的實體之間選擇[關聯路徑](relationships.md)。 關係路徑決定哪些屬性可以在條件中使用。

1. 管理規則和子規則。 更改規則的位置或將其刪除。

1. 新增條件並使用子規則組建正確的巢狀等級。

1. 套用集合作業到連接的規則。

1. 使用屬性窗格新增可用實體屬性或根據屬性建立條件。 窗格會基於選定關聯路徑顯示實體和屬性清單，這些實體和屬性可用於選定規則。

1. 根據屬性新增條件到現行規則和子規則或將其新增到新規則中。

1. 組建區段時復原和重做變更。

上述範例闡釋了客戶細分的功能。 我們把購買 $500 以上的商品 *且* 對軟體發展有興趣的客戶定義成一個客戶細分。

## <a name="create-a-new-segment-with-segment-builder"></a>使用客戶細分建立器建立新客戶細分

1. 前往 **區段**。

1. 選取 **新增** > **建立自己的...**。 您可以在區段 Builder 頁面上定義或撰寫規則。 規則包含定義一組客戶的一個或多個條件。

1. 選取無標題客戶細分旁邊的 **編輯詳細資料**。 為您的區段提供名稱，並更新對該區段建議的 **輸出實體名稱**。 或者，將說明及[標籤](work-with-tags-columns.md#manage-tags)新增至客戶細分。

   :::image type="content" source="media/segments_edit_details.png" alt-text="編輯詳細資料對話方塊。":::

1. 在 **Rule1** 區段中，選取您要用來篩選客戶的實體屬性。 有兩種方式可選擇屬性：
   - 在 **新增至規則** 窗格中檢閱可用實體和屬性的清單，並選取屬性旁邊的 **+** 圖示。 選擇是否要將屬性新增至現有規則，或使用它來建立新規則。
   - 在規則區段中輸入屬性的名稱，查看比對建議。

1. 選擇運算子來指定條件的比對值。 屬性的值可以是四種資料類型之一：數字、字串、日期或布林值。 視屬性的資料類型而定，可以使用不同的運算子來指定條件。 含有商務帳戶的區段方面，可使用兩個特殊運算子包括擷取帳戶之間的潛在階層。 請使用運算子的 *子系* 和 *父代* 包括相關帳戶。

1. 選取 **新增條件**，將更多條件新增至規則。 若要在現在的規則底下建立規則，請選取 **新增子規則**。

1. 如果規則使用的是 *客戶* 實體以外的實體，請選取 **設定關聯路徑**，以將所選的實體對應至統一的客戶實體。 如果可能的關聯路徑只有一個，系統會自動選取該路徑。 不同的[關聯路徑](relationships.md#relationship-paths)可能會產生不同的結果。 每個規則都可以有自己的關聯路徑。

   :::image type="content" source="media/relationship-path.png" alt-text="根據整合客戶實體對應的實體建立規則時，可能的關聯路徑。":::

1. 如果規則有多個條件，可選擇用哪個邏輯運算子連接它們。  
   - **AND** 運算子：必須符合所有條件，記錄才能被包括在區段中。 當您跨不同實體定義條件時使用此選項。
   - **OR** 運算子：必須符合任一條件，記錄才能被包括在區段中。 為同一實體定義多個條件時可使用此選項。

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="帶有兩個 AND 條件的規則。":::

   使用 OR 運算子時，所有條件都必須根據關聯路徑中的實體建立。

1. 若要建立不同的客戶記錄集，請建立多個規則。 若要包括您的業務案例所需的客戶，請合併群組。 特別是當您因為具體指明的關係路徑而無法將實體納入規則時，就必須建立新規則才能選擇屬性表單。

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="將新規則新增至客戶細分，然後選擇集合運算子。":::

   1. 選取 **新增規則**。
   1. 選取集合運算子中的一個：**Union**、**Intersect** 或 **Except**。

      - **聯集** 會聯合兩個群組。
      - **交集** 會重疊兩個群組。 唯有兩個群組 *共用* 的資料才會一直留在統一群組不變。
      - **差集** 會結合兩個群組。 只會保存與 B 群組資料 *不共用* 的 A 群組資料。

1. 根據預設，輸出實體將自動包含與定義的篩選相符的客戶設定檔的所有屬性。 如果客戶細分是依據其他實體而非 *客戶* 實體，則選擇 **專案屬性** 以將這些實體中的多個屬性新增至輸出實體。

   > [!IMPORTANT]
   > 以商務帳戶為主的區段方面，從 *ContactProfile* 實體的個別帳戶所屬一名或多名連絡人必須納入區段內，才能允許啟動區段或匯出區段到需要連絡人資訊的目的地。 如需更多關於 *ContactProfile* 實體的資訊，請參閱[語義對應](semantic-mappings.md)。
   > 根據已預定連絡人屬性的商務帳戶區段輸出範例可能酷似：
   >
   > |識別碼  |客戶名稱  |收益  |連絡人名稱  | 連絡人角色|
   > |---------|---------|---------|---------|---|
   > |10021     | Contoso | 100K | [Abbie Moss, Ruth Soto]  | [CEO，採購經理]

   :::image type="content" source="media/segments-project-attributes.png" alt-text="側邊窗格中選取投影屬性新增至輸出實體的範例。":::
  
   例如：區段以內含購買資料的實體為主，其與 *客戶* 實體相關。 客戶細分會尋找所有在西班牙今年已購買貨物的客戶。 您可以選擇將屬性 (如：商品價格或採購日期) 附加至輸出實體中所有符合的客戶記錄。 此資訊可能有助於分析總支出的季節性關聯性。

   > [!NOTE]
   > - **專案屬性** 只搭配和客戶實體有一對多關聯性的實體。 例如，一個客戶可以有多個訂閱。
   > - 如果您想要預測的屬性距離 *客戶* 實體 (如關聯定義) 有一個以上的中繼段，應在每個組建的區段查詢規則中使用該屬性。
   > - 如果您想要預測的屬性距離 *客戶* 實體只有一個中繼段，則每個組建的區段查詢規則中毋須存在該屬性。
   > - 使用集合運算子時，**預測的屬性** 會被做為因素考慮。

1. 選取 **執行** 以建立客戶細分。 如果您要保留目前的設定稍後執行客戶細分，請選取 **儲存**。 **客戶細分** 頁面隨即出現。

### <a name="segment-builder-tips"></a>客戶細分建立器訣竅

使用客戶細分建立器建立客戶細分時，請記住以下訣竅：

- 在條件中設定此運算子時，客戶細分建立器無法從實體建議有效值。 您可以移至 **資料** > **實體** 並下載實體資料，以查看可用的值。
- 根據日期的條件，可讓您在固定日期與浮動日期範圍之間切換。
- 如果您有多重規則用於區段，您正在編輯的規則旁邊會有一條垂直的藍線。
- 您可以將規則和條件移至客戶細分定義中的其他位置。 選取規則或條件旁邊的垂直省略符號 (&vellip;)，並選擇該規則或條件的移動方式和位置。
- 指令列中的 **復原** 和 **重做** 控制項會讓您復原變更。
- 建立客戶細分之後，某些客戶細分可讓您[追蹤客戶細分的使用方式](segments.md#track-usage-of-a-segment)。

## <a name="next-steps"></a>後續步驟

[匯出一個客戶細分](export-destinations.md)，並探索[客戶卡整合](customer-card-add-in.md)，以便在其他應用中使用客戶細分。

[!INCLUDE [footer-include](includes/footer-banner.md)]

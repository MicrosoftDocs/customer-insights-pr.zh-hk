---
title: 使用客戶細分建立器頁面建立複雜客戶細分
description: 使用客戶細分建立器根據各種屬性對客戶進行分組來建立複雜的客戶細分。
ms.date: 08/12/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: 7f691fd0b2ea76a2960d5adf766a4b166f02ebb4
ms.sourcegitcommit: 267c317e10166146c9ac2c30560c479c9a005845
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 08/16/2022
ms.locfileid: "9304776"
---
# <a name="create-complex-segments-with-segment-builder"></a>使用客戶細分建立器頁面建立複雜客戶細分

定義整合客戶或整合連絡人及其相關實體方面的複雜篩選條件。 處理之後，每個客戶細分都會建立一組您可以匯出並對其執行動作的客戶或連絡人記錄。

> [!TIP]
> 以 **個別客戶** 為主的客戶細分自動包括客戶細分成員可用的連絡人資訊。 在 **商務客戶** 中，如果您同時[整合](data-unification.md)了客戶與連絡人，請選擇據以建立客戶細分的是客戶還是商務連絡人。 若要匯出至需要連絡人資訊的目的地，請使用連絡人的客戶細分。 若要匯出至需要客戶資訊的目的地，請使用客戶的客戶細分。

## <a name="segment-builder"></a>客戶細分建立器

下圖顯示了客戶細分建立器的各個外觀。 這會顯示一個客戶細分，可以產生一個客戶團體。 客戶在特定時間範圍訂購貨物並收集獎勵積分或花費特定金額。

:::image type="content" source="media/segment-builder-overview.png" alt-text="客戶細分建立器的元素。" lightbox="media/segment-builder-overview.png":::

1. 利用規則和子規則整理您的客戶細分。 每個規則或子規則都由條件組成。 將條件與邏輯運算子相結合。

1. 在適用規則的實體之間選擇[關聯路徑](relationships.md)。 關係路徑決定哪些屬性可以在條件中使用。

1. 管理規則和子規則。 更改規則的位置或將其刪除。

1. 新增條件並使用子規則組建正確的巢狀等級。

1. 套用集合作業到連接的規則。

1. 使用屬性窗格新增可用實體屬性或根據屬性建立條件。 窗格會基於選定關聯路徑顯示實體和屬性清單，這些實體和屬性可用於選定規則。

1. 根據屬性新增條件到現行規則和子規則或將其新增到新規則中。

1. 建立客戶細分時復原和重做變更。

上述範例闡釋了客戶細分的功能。 我們把購買 $500 以上的商品 *且* 對軟體發展有興趣的客戶定義成一個客戶細分。

## <a name="create-a-new-segment-with-segment-builder"></a>使用客戶細分建立器建立新客戶細分

1. 移至 **客戶細分**。

1. 選取 **新增** > **建立自己的...**。 您可以在客戶細分建立器頁面上定義或撰寫規則。 規則包含定義一組客戶的一個或多個條件。

   > [!NOTE]
   > 對於以商務客戶為基礎建立的環境，請根據您要建立的客戶細分類型，選取 **新增** > **客戶的客戶細分** 或 **連絡人的客戶細分 (預覽版)**。 如果已定義 [客戶階層](relationships.md#set-up-account-hierarchies)，而您想要建立可依據上下層關聯篩除資料的規則時，請選取 **使用階層? (預覽版)**、選取階層，然後選取 **套用**。
   >
   > :::image type="content" source="media/segment_acct_hierarchy.png" alt-text="客戶細分 [選取客戶階層] 窗格。":::

1. 選取無標題客戶細分旁邊的 **編輯詳細資料**。 為您的客戶細分提供名稱，並更新對該客戶細分建議的 **輸出實體名稱**。 或者，將說明及[標籤](work-with-tags-columns.md#manage-tags)新增至客戶細分。

   :::image type="content" source="media/segments_edit_details.png" alt-text="編輯詳細資料對話方塊。":::

1. 在 **Rule1** 區段中，選取您要用來篩選客戶的實體屬性。 有兩種方式可選擇屬性：
   - 在 **新增至規則** 窗格中檢閱可用實體和屬性的清單，並選取屬性旁邊的 **+** 圖示。 選擇是否要將屬性新增至現有規則，或使用它來建立新規則。
   - 在規則區段中輸入屬性的名稱，查看比對建議。

1. 選擇運算子來指定條件的比對值。 屬性的值可以是四種資料類型之一：數字、字串、日期或布林值。 視屬性的資料類型而定，可以使用不同的運算子來指定條件。

1. 選取 **新增條件**，將更多條件新增至規則。 若要在現在的規則底下建立規則，請選取 **新增子規則**。

1. 如果規則使用 *客戶* 實體 (或 B 到 B 的 *ContactProfile* 實體) 以外的實體，請選取 **設定關聯路徑** 將選取的實體對應至整合客戶實體。 如果可能的關聯路徑只有一個，系統會自動選取該路徑。 不同的[關聯路徑](relationships.md#relationship-paths)可能會產生不同的結果。 每個規則都可以有自己的關聯路徑。

   :::image type="content" source="media/relationship-path.png" alt-text="根據整合客戶實體對應的實體建立規則時，可能的關聯路徑。":::

1. 如果規則有多個條件，可選擇用哪個邏輯運算子連接它們。  
   - **AND** 運算子：必須符合所有條件，才能將記錄包含在客戶細分中。 當您跨不同實體定義條件時使用此選項。
   - **OR** 運算子：必須符合任一條件，才能將記錄包含在客戶細分中。 為同一實體定義多個條件時可使用此選項。

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="帶有兩個 AND 條件的規則。":::

   使用 OR 運算子時，所有條件都必須根據關聯路徑中的實體建立。

1. 若要建立不同的客戶記錄集，請建立多個規則。 若要包括您的業務案例所需的客戶，請合併群組。 特別是當您因為具體指明的關係路徑而無法將實體納入規則時，就必須建立新規則才能選擇屬性表單。

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="將新規則新增至客戶細分，然後選擇集合運算子。":::

   1. 選取 **新增規則**。
   1. 選取集合運算子中的一個：**Union**、**Intersect** 或 **Except**。

      - **聯集** 會聯合兩個群組。
      - **交集** 會重疊兩個群組。 唯有兩個群組 *共用* 的資料才會一直留在統一群組不變。
      - **差集** 會結合兩個群組。 只會保存與 B 群組資料 *不共用* 的 A 群組資料。

1. 根據預設，輸出實體將自動包含與定義的篩選相符的客戶設定檔的所有屬性。 在使用 *ContactProfile* 實體時的 B 到 B 中，會自動包含客戶識別碼。 如果客戶細分是根據 *客戶* 實體以外的實體所建立，或是要包含更多來自 *ContactProfile* 的屬性，請選取 **專案屬性** 以將更多這些實體中的屬性新增至輸出實體。
 
   例如：客戶細分以內含購買資料的實體為主，其與 *客戶* 實體相關。 客戶細分會尋找所有在西班牙今年已購買貨物的客戶。 您可以選擇將屬性 (如：商品價格或採購日期) 附加至輸出實體中所有符合的客戶記錄。 此資訊可能有助於分析總支出的季節性關聯性。

   :::image type="content" source="media/segments-project-attributes.png" alt-text="側邊窗格中選取投影屬性新增至輸出實體的範例。":::
 
   根據已預定連絡人屬性的商務帳戶客戶細分輸出範例可能看起來像這樣：

   |識別碼  |客戶名稱  |收益  |連絡人名稱  | 連絡人角色|
   |---------|---------|---------|---------|---|
   |10021     | Contoso | 100K | [Abbie Moss, Ruth Soto]  | [CEO，採購經理]

   > [!NOTE]
   > - **專案屬性** 僅適用於與 *客戶* 或 *ContactProfile* 實體有一對多關聯的實體。 例如，一個客戶可以有多個訂閱。
   > - 如果您要推斷的屬性與 *客戶* 或 *ContactProfile* 實體 (如關聯性所定義) 相距多個躍點，則必須在每個您要建立的客戶細分查詢規則中使用該屬性。
   > - 如果您要推斷的屬性與 *客戶* 或 *ContactProfile* 實體僅相距一個躍點，則該屬性不需要存在於每個您要建立的客戶細分查詢規則中。
   > - 使用集合運算子時，**預測的屬性** 會被做為因素考慮。

1. 選取 **執行** 以建立客戶細分。 如果您要保留目前的設定稍後執行客戶細分，請選取 **儲存**。 **客戶細分** 頁面隨即出現。

### <a name="segment-builder-tips"></a>客戶細分建立器訣竅

使用客戶細分建立器建立客戶細分時，請記住以下訣竅：

- 在條件中設定此運算子時，客戶細分建立器無法從實體建議有效值。 您可以移至 **資料** > **實體** 並下載實體資料，以查看可用的值。
- 根據日期的條件，可讓您在固定日期與浮動日期範圍之間切換。
- 如果您有多重規則用於客戶細分，您正在編輯的規則旁邊會有一條垂直的藍線。
- 您可以將規則和條件移至客戶細分定義中的其他位置。 選取規則或條件旁邊的垂直省略符號 (&vellip;)，並選擇該規則或條件的移動方式和位置。
- 指令列中的 **復原** 和 **重做** 控制項會讓您復原變更。
- 建立客戶細分之後，某些客戶細分可讓您[追蹤客戶細分的使用方式](segments.md#track-usage-of-a-segment)。

## <a name="next-steps"></a>後續步驟

[匯出一個客戶細分](export-destinations.md)，並探索[客戶卡整合](customer-card-add-in.md)，以便在其他應用中使用客戶細分。

[!INCLUDE [footer-include](includes/footer-banner.md)]

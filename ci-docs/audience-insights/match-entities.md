---
title: 比對資料統整的實體
description: 比對實體以建立統整的客戶設定檔。
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 05afd17b7f1b34f7f24a8fa8cb2dc32c1649d40f
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: zh-HK
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267505"
---
# <a name="match-entities"></a>比對實體

完成比對階段之後，您就可以準備比對您的實體。 比對階段指定如何將您的資料集結合至統整的客戶設定檔資料集。 比對階段需要至少[兩個已比對的實體](map-entities.md)。

## <a name="specify-the-match-order"></a>指定比對順序

移至 **資料** > **統整** > **比對**，然後選取 **設定順序**，開始比對階段。

每個比對都會將兩個或多個實體統整成單一實體，同時保留每個唯一的客戶記錄。 在下列範例中，我們選取三個實體：**ContactCSV: TestData** 做為 **主要** 實體、**WebAccountCSV: TestData** 做為 **實體 2**，以及 **CallRecordSmall: TestData** 做為 **實體 3**。 選取項目上方的圖表將闡釋如何執行比對順序。

> [!div class="mx-imgBorder"]
> ![編輯資料比對順序](media/configure-data-match-order-edit-page.png "編輯資料比對順序")
  
**主要** 實體與 **實體 2** 進行比對。 第一個比對所產生的資料集會與 **實體 3** 進行比對。
在此範例中，我們只選取兩個比對項目，但是系統可以支援更多的比對。

> [!IMPORTANT]
> 您選擇做為 **主要** 實體的實體將用作您的統整主要資料集的基礎。 在比對階段期間選取的其他實體將會新增至此實體中。 同時，這並不表示統整的實體將包括此實體中包含的 *所有* 資料。
>
> 有兩個考慮可以協助您選擇實體的階層：
>
> - 您要考慮哪一個實體，讓您的客戶有最完整和可靠的資料？
> - 您剛剛識別的實體是否有其他實體共用的屬性（例如名稱、電話號碼或電子郵件地址）？ 如果沒有，請選擇第二個最可靠的實體。

選取 **完成** 來儲存您的比對順序。

## <a name="define-rules-for-your-first-match-pair"></a>定義第一個比對配對的規則

指定比對順序之後，您會在 **比對** 頁面上看到已定義的比對。 在您執行比對順序之前，畫面頂端的圖標將會是空白。

> [!div class="mx-imgBorder"]
> ![定義規則](media/configure-data-match-need-rules.png "定義規則")

**需要規則** 警告表示未替比對配對定義比對規則。 比對規則指定將與特定實體配對進行比對的邏輯。

1. 若要定義第一個規則，請在比對表格中選取對應的比對列 (1)，然後選取 **建立新規則** (2)，以開啟 **規則定義** 窗格。

   > [!div class="mx-imgBorder"]
   > ![建立新規則](media/configure-data-match-new-rule2.png "建立新規則")

2. 在 **編輯規則** 窗格中，設定該規則的條件。 每個條件都是由兩列表示，其中包含必要選項。

   > [!div class="mx-imgBorder"]
   > ![新規則窗格](media/configure-data-match-new-rule-condition.png "新規則窗格")

   實體/欄位（第一個）- 將用於從第一個比對配對實體中進行比對的屬性。 範例可以包括電話號碼或電子郵件地址。 選擇可能對客戶有唯一性的屬性。

   > [!TIP]
   > 避免根據活動類型屬性進行比對。 換言之，如果某個屬性看起來是活動，則它可能不是好的比對準則。  

   實體/欄位（第二個）- 將用於從第二個比對配對實體中進行比對的屬性。

   標準化 - **標準化方法**：您可以在選取的屬性上使用各種標準化選項。 例如，移除標點符號或移除空格

   對於組織名稱標準化 (預覽)，您也可以選取 **類型 (電話、名稱、組織)**

   > [!div class="mx-imgBorder"]
   > ![Normalization-B2B](media/match-normalization-b2b.png "Normalization-B2B")

   精確度等級 - 用於此條件的精確度等級。 設定比對條件的精確度等級可以有兩種類型：**基本** 和 **自訂**。  
   - 基本：提供四個選項以供選取：[低]、[中]、[高] 和 [完全相符]。 選取 **完全相符** 以只比對符合 100% 的記錄。 選取其中一個其他等級，以比對不是 100% 相同的記錄。
   - 自訂：使用滑桿來定義記錄需要比對的自訂百分比，或在 **自訂** 欄位中輸入值。 系統只會將超過此閾值的記錄比對為合併的比對配對。 滑桿的值介於 0 與 1 之間。 因此 0.64 表示 64%。

3. 選取 **完成** 以儲存規則。

### <a name="add-multiple-conditions"></a>新增多個條件

若只要在符合多個條件時比對實體，請新增透過 AND 運算子連結的更多條件。

1. 在 **編輯規則** 窗格中，選取 **新增條件**。 您也可以選取現有條件旁邊的 [移除] 按鈕來刪除條件。

2. 選取 **完成** 以儲存規則。

## <a name="add-multiple-rules"></a>新增多個規則

每個條件都會套用至單一屬性對，而規則則代表條件集。 若要讓您的實體依照不同的屬性集進行比對，您可以新增其他規則。

1. 請在對象見解中前往 **資料** > **統整** > **比對**。

2. 選取您要更新的實體，然後選取 **新增規則**。

3. 依照[定義第一個比對配對的規則](#define-rules-for-your-first-match-pair)中所述的程序進行。

> [!NOTE]
> 規則順序很重要。 比對演算法會嘗試根據您的第一個規則來進行比對，而且只有在第一個規則下未找到任何符合項目時，才會繼續進行第二個規則。

## <a name="define-deduplication-on-a-match-entity"></a>請在比對實體上定義重複資料刪除

您也可以同時指定上述各節概述的交叉實體比對規則和重複資料刪除規則。 *重複資料刪除* 是一道流程。 它找出重複記錄、將它們合併成一筆記錄，並將所有來源記錄連結到這筆與備用識別碼合併的記錄再連結到合併記錄。

找出刪除重複的資料後，該筆記錄將用於跨實體比對流程。 重複資料刪除在實體等級執行，可套用在比對流程中使用的每個實體。

### <a name="add-deduplication-rules"></a>新增重複資料刪除規則

1. 請在對象見解中前往 **資料** > **統整** > **比對**。

1. 請在 **合併的重複資料** 區段中選取 **設定實體**。

1. 請在 **合併偏好** 區段中選取您要套用重複資料刪除規則的實體。

1. 指定合併重複記錄的方式並選擇三種合併選項中其中一種：
   - *填滿最多的*：找出填滿最多屬性的記錄並指定為贏家記錄。 這是預設合併選項。
   - *最新*：根據最新情況找出贏家記錄。 需要日期或數字欄位來定義最新。
   - *最近最少情況*：根據最近最少情況找出贏家記錄。 需要日期或數字欄位來定義最新。
 
   > [!div class="mx-imgBorder"]
   > ![重複資料刪除規則步驟 1](media/match-selfconflation.png "重複資料刪除規則步驟 1")
 
1. 一旦選取實體並設定其合併偏好後，請選取 **建立新規則**，以便在實體等級上定義重複資料刪除規則。
   - **選取欄位** 列出所有您要刪除重複資料來源資料實體的可用欄位。
   - 以交叉實體比對流程中指定的類似方式指定正規化和精確度設定。
   - 您可以選取 **新增條件** 來定義其他條件。
 
   > [!div class="mx-imgBorder"]
   > ![重複資料刪除規則步驟 2](media/match-selfconflation-rules.png "重複資料刪除規則步驟 2")

  您可以為某實體建立多個重複資料刪除規則。 

1. 現在執行比對流程會根據重複資料消除規則中定義的條件分組記錄。 記錄分組之後就會套用合併規則找出贏家記錄。

1. 然後，此勝出記錄會傳遞至交叉實體比對，同時也會傳遞非勝出記錄 (例如，替代識別碼)，以改善比對品質。

1. 任何定義為永遠符合和從不符合的自訂比對規則都會否決重複資料刪除規則。 若重複資料刪除規則找出比對記錄，且自訂比對規則設定為永不符合那些記錄，則這兩筆記錄將無法符合。

1. 比對流程執行後，您將見到重複資料刪除統計數據。
   
> [!NOTE]
> 指定重複資料刪除規則並非必要動作。 如果未組態此類規則，會套用系統定義的規則。 它們先將從主索引鍵分享同值組合 (完全符合) 的各筆記錄和比對規則中的各欄位摺疊收起為單筆記錄，再將實體資料傳遞到跨實體比對規則，強化效能和系統健全性。

## <a name="run-your-match-order"></a>執行您的比對順序

定義比對規則，包括跨實體比對和重複資料刪除規則後，您可以執行比對順序。 在 **比對** 頁面上，選取 **執行** 來開始處理。 比對演算法可能需要一段時間才能完成。 您無法在 **比對** 頁面上變更屬性，直到比對程序完成為止。 您會在 **實體** 頁面上找到建立的統整客戶設定檔實體。 您的統整客戶實體稱為 **ConflationMatchPairs: CustomerInsights**。

若要進行其他變更並重新執行步驟，您可以取消進行中的比對。 選取 **重新整理中...** 文字，然後在出現的側面窗格底部選取 **取消工作**。

當比對程序完成時，**重新整理中...** 文字將會變更為 **成功**，您便可以再次使用頁面的所有功能。

第一個比對程序會建立統整的主要實體。 所有後續的比對執行都會造成該實體的延伸。

> [!TIP]
> 任務/流程目前有 [六種類型的狀態](system.md#status-types)。 此外，大部分程序都要[依賴其他下游程序](system.md#refresh-policies)。 您可以選取程序的狀態，以查看整個工作的進度詳細資料。 針對其中一項作業的工作選取 **查看詳細資料** 之後，您會找到其他資訊：處理時間、上次處理日期以及所有與工作相關的錯誤和警告。

## <a name="deduplication-output-as-an-entity"></a>重複資料刪除輸出成實體
除了作為部分交叉實體比對而建立的整合主要實體之外，重複資料刪除程序也會為比對程序中的每個實體生成新的實體，以找出重複資料刪除記錄。 這些實體與 **ConflationMatchPairs:CustomerInsights** 都可以找到，位在 **實體** 頁面的 **系統** 區段中，名稱為 **Deduplication_Datasource_Entity**。

重複資料刪除輸出實體包含下列資訊：
- 識別碼/金鑰
  - 主索引鍵欄位及其替代識別碼欄位。 替代識別碼欄位是由被辨識為記錄的替代識別碼所組成。
  - 根據指定的重複資料刪除欄位，Deduplication_GroupId 欄位顯示實體中辨識出的群組或叢集，裡面都是類似記錄。 這是為了進行系統處理。 如果未指定手動重複資料刪除規則，並套用系統定義的重複資料刪除規則，您就不會在重複資料刪除輸出實體中找到此欄位。
  - Deduplication_WinnerId：此欄位包含的勝出識別碼來自於已辨識的群組或叢集。 如果 Deduplication_WinnerId 與記錄的主索引鍵相同，則表示該記錄是勝出的記錄。
- 用來定義重複資料刪除規則的欄位。
- 規則和分數欄位，表示所套用的重複資料刪除規則和比對演算法回傳的分數。

## <a name="review-and-validate-your-matches"></a>檢閱和驗證您的比對

評估您的比對配對品質並對其進行微調：

- 在 **比對** 頁面上，您會找到兩個顯示您資料初始見解的圖標。

  - **唯一客戶**：顯示系統所識別的唯一設定檔數目。
  - **相符的記錄**：顯示所有比對配對中的相符項目數目。

- 在 **比對順序** 表格中，您可以比來自從這個比對配對實體中的記錄數與成功相符記錄數的百分比，來評估每個比對配對的結果。

- 在 **比對順序** 表格中實體的 **規則** 區段中，您可在規則等級找到成功相符記錄的百分比。 透過選取規則旁邊的表格符號，您就可以在規則等級查看所有這些記錄。 我們建議您檢閱部分記錄以驗證它們是否正確相符。

- 在您的條件中試驗不同的精確度閾值，以找出最佳的值。

  1. 針對您要實驗的比對配對規則選取省略號 (...)，並選取 **編輯**。

  2. 選取您要實驗的條件。 每個準則都在 **比對規則** 窗格中以一列表示。

  3. 您可以在 **準則預覽** 頁面上看到的內容，取決於您所選取的條件精確度等級。 尋找所選取條件的相符和不相符記錄數目。

     深入了解不同閾值等級的影響。 您可以比較在每個閾值等級下方相符的記錄數，並查看每個選項下的記錄。 選取每個圖標，並查看表格區段中的資料。

## <a name="optimize-your-matches"></a>最佳化您的比對

重新設定部分比對參數以改善品質：

- **變更比對順序**：選取 **編輯** 並變更比對順序欄位。

  > [!div class="mx-imgBorder"]
  > ![編輯資料比對順序](media/configure-data-match-order-edit.png "編輯資料比對順序")

- **變更您的規則順序**：若您定義了多個規則。 您可以在比對規則格線中選取 **上移** 和 **下移** 選項，重新排序比對規則。

  > [!div class="mx-imgBorder"]
  > ![變更規則順序](media/configure-data-change-rule-order.png "變更規則順序")

- **複製您的規則**：如果您定義了比對規則，且想要透過修改來建立類似的規則。 請選取 **複製** 來執行此動作。

  > [!div class="mx-imgBorder"]
  > ![複製規則](media/configure-data-duplicate-rule.png "複製規則")

- **停用規則**，從比對程序排除規則時，保留比對規則。

  > [!div class="mx-imgBorder"]
  > ![停用規則](media/configure-data-deactivate-rule.png "停用規則")

- **編輯您的規則**：選取 **編輯** 符號。 您可以套用下列變更：

  - 變更條件的屬性：在特定的條件列中選取新屬性。
  - 變更條件的閾值：調整精確度滑桿。
  - 變更條件的標準化方法：更新標準化方法。

## <a name="specify-your-custom-match-records"></a>指定自訂的比對記錄

您可以指定某些記錄應一律比對或絕不比對的條件。 這些規則可以大量上傳至比對程序。

1. 在 **比對順序** 畫面上選取 **自訂比對** 選項。

   > [!div class="mx-imgBorder"]
   > ![建立自訂比對](media/custom-match-create.png "建立自訂比對")

2. 如果您未上傳實體，則會看到新的 **自訂比對** 對話方塊，需要您填寫某些詳細資料。 如果您先前已提供這些詳細資料，請跳至步驟 8。

   > [!div class="mx-imgBorder"]
   > ![新增自訂比對對話方塊](media/custom-match-new-dialog-box.png "新增自訂比對對話方塊")

3. 選取 **填入範本** 以取得範本檔案，此範本檔案可以指定實體應一律比對或絕不比對的記錄。 您需要在兩個不同的檔案中，分別填入「一律比對」記錄和「絕不比對」記錄。

4. 此範本包含欄位，指定實體以及要在自訂比對中使用的實體主索引鍵值。 例如，如果您想要來自銷售實體的主索引鍵 12345 一律比對來自連絡人實體中的主索引鍵 34567，您必須指定下列項目：
    - Entity1：銷售
    - Entity1Key：12345
    - Entity2：連絡人
    - Entity2Key：34567

   相同的範本檔案可以指定來自多個實體的自訂比對記錄。
   
   如果您想要在實體上指定重複資料刪除的自訂比對，請提供相同的實體當作 Entity1 和 Entity2 ，並設定不同主索引鍵值。

5. 在新增您要套用的所有覆寫之後，儲存範本檔案。

6. 前往 **資料** > **資料來源** 並將範本檔案內嵌為新實體。 內嵌之後，您可以使用它們來指定比對設定。

7. 在上傳檔案且實體可用之後，請再次選取 **自訂比對** 選項。 您會看到選項，以指定您想要加入的實體。 從下拉式功能表選取所需實體。

   > [!div class="mx-imgBorder"]
   > ![自訂比對覆寫](media/custom-match-overrides.png "自訂比對覆寫")

8. 選取您要用於 **一律比對** 和 **絕不比對** 的實體，選取 **完成**。

9. 針對您剛剛設定的自訂比對設定，在 **比對** 頁面上選取 **儲存**。

10. 在 **比對** 頁面上選取 **執行** 以開始比對程序，而自訂的比對設定將生效。 任何系統比對規則都會由設定集所取代。

11. 完成比對後，您可以驗證 **ConflationMatchPair** 實體，確認在合併比對中套用了覆寫。

## <a name="next-step"></a>後續步驟

在完成至少一個比對配對的比對程序之後，您可以透過 [**合併**](merge-entities.md)主題來解決資料中可能的矛盾。


[!INCLUDE[footer-include](../includes/footer-banner.md)]